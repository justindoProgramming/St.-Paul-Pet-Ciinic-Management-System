@model IEnumerable<PetClinicSystem.Models.Owner>

@{
    Layout = "~/Views/Shared/_Layout_Admin.cshtml";
    ViewBag.ActiveMenu = "Owners";

    var ownersList = Model.ToList();
    var totalOwners = ownersList.Count;
    var ownersWithPets = ownersList.Count(o => o.Pets != null && o.Pets.Any());
}

<div class="container-fluid py-4">

    <!-- HEADER + ADD BUTTON -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold">Owners</h3>

        <div class="d-flex gap-2">
            <input id="ownerSearchBox"
                   class="form-control"
                   placeholder="Search by name, email, or phone"
                   style="max-width: 280px;" />

            <button class="btn btn-success" onclick="loadOwnerCreate()">
                <i class="fa-solid fa-user-plus me-2"></i> Add Owner
            </button>
        </div>
    </div>

    <!-- STATS -->
    <div class="row g-3 mb-4">
        <div class="col-md-4">
            <div class="card shadow-sm border-0 rounded-4 p-3 h-100">
                <div class="d-flex align-items-center gap-3">
                    <div class="icon-circle bg-success-subtle text-success">
                        <i class="fa-solid fa-user-group"></i>
                    </div>
                    <div>
                        <div class="text-secondary small">Total Owners</div>
                        <div class="h4 mb-0 fw-bold">@totalOwners</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm border-0 rounded-4 p-3 h-100">
                <div class="d-flex align-items-center gap-3">
                    <div class="icon-circle bg-info-subtle text-info">
                        <i class="fa-solid fa-paw"></i>
                    </div>
                    <div>
                        <div class="text-secondary small">Owners with Patients</div>
                        <div class="h4 mb-0 fw-bold">@ownersWithPets</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- OWNERS LIST -->
    <div class="row g-3" id="ownersContainer">
        @await Html.PartialAsync("_OwnerCards", ownersList)
    </div>
</div>

<!-- MODAL SHELLS -->
<div class="modal fade" id="ownerCreateModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content" id="ownerCreateContent"></div>
    </div>
</div>

<div class="modal fade" id="ownerViewModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content" id="ownerViewContent"></div>
    </div>
</div>

<div class="modal fade" id="ownerEditModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content" id="ownerEditContent"></div>
    </div>
</div>

<div class="modal fade" id="ownerDeleteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content" id="ownerDeleteContent"></div>
    </div>
</div>

@section Scripts {
    <script src="~/js/owners.js"></script>
}
